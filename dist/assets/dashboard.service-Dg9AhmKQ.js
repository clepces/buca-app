import{L as n}from"./index-D_o6p_Zt.js";function m(t){if(n.info(`Dashboard Stats: Calculando con ${t?t.length:0} productos.`),t&&t.length>0&&n.trace("Primer producto para cÃ¡lculo:",JSON.stringify(t[0])),!t||t.length===0)return{totalProducts:0,totalInvestment:0,totalStockValue:0,potentialProfit:0};const o=t.reduce((c,e,l)=>{const r=e.stock?.current||0,P=e.pricing?.packageCost||0,g=e.pricing?.unitsPerPackage||e.pricing?.priceLists?.unitsPerPackage||1,k=e.pricing?.unitSellPrice||e.pricing?.priceLists?.unitSellPrice||0,S=P/(g>0?g:1),u=S*r,$=k*r;return l===0&&(n.trace(`Prod ${l}: Stock=${r}, PkgCost=${P}, Units/Pkg=${g}, UnitSellPrice=${k}`),n.trace(`Prod ${l}: Cost/Unit=${S.toFixed(4)}, Adding Invest=${u.toFixed(4)}, Adding StockVal=${$.toFixed(4)}`)),c.investment+=u,c.stockValue+=$,c},{investment:0,stockValue:0}),i=isNaN(o.investment)?0:o.investment,a=isNaN(o.stockValue)?0:o.stockValue,s=a-i;return n.info(`Dashboard Stats: Inv=${i.toFixed(2)}, StockVal=${a.toFixed(2)}, Profit=${s.toFixed(2)}`),{totalProducts:t.length,totalInvestment:i,totalStockValue:a,potentialProfit:isNaN(s)?0:s}}export{m as g};
